{"filter":false,"title":"function.php","tooltip":"/function.php","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":69,"column":2},"action":"remove","lines":["<?php","","function timeAgo($time_ago){","","   $time_ago = strtotime($time_ago);","   $cur_time   = time();","   $time_elapsed   = $cur_time - $time_ago;","   $seconds    = $time_elapsed ;","   $minutes    = round($time_elapsed / 60 );","   $hours      = round($time_elapsed / 3600);","   $days       = round($time_elapsed / 86400 );","   $weeks      = round($time_elapsed / 604800);","   $months     = round($time_elapsed / 2600640 );","   $years      = round($time_elapsed / 31207680 );","   // Seconds","   if($seconds <= 60){","       return \"just now\";","   }","   //Minutes","   else if($minutes <=60){","       if($minutes==1){","           return \"one minute ago\";","       }","       else{","           return \"$minutes minutes ago\";","       }","   }","   //Hours","   else if($hours <=24){","       if($hours==1){","           return \"an hour ago\";","       }else{","           return \"$hours hrs ago\";","       }","   }","   //Days","   else if($days <= 7){","       if($days==1){","           return \"yesterday\";","       }else{","           return \"$days days ago\";","       }","   }","   //Weeks","   else if($weeks <= 4.3){","       if($weeks==1){","           return \"a week ago\";","       }else{","           return \"$weeks weeks ago\";","       }","   }","   //Months","   else if($months <=12){","       if($months==1){","           return \"a month ago\";","       }else{","           return \"$months months ago\";","       }","   }","   //Years","   else{","       if($years==1){","           return \"one year ago\";","       }else{","           return \"$years years ago\";","       }","   }","  }"," ","?>"],"id":51},{"start":{"row":0,"column":0},"end":{"row":121,"column":2},"action":"insert","lines":["<?php ","\tclass  Main{","\t\t//login function ","\t\tpublic function login($username,$password){","\t\t\tglobal $pdo;","\t \t\t$query = $pdo->prepare(\"SELECT * from users WHERE username = ? and password = ?\");","\t\t\t$query->bindValue(1,$username);","\t\t\t$query->bindValue(2,$password);","\t\t\t$query->execute();","\t\t    $rows = $query->fetch(PDO::FETCH_NUM);","","\t\t\t\tif($rows > 0){","\t\t\t\t\t$_SESSION['user_id'] = $rows[0];","\t\t\t\t\theader('Location: index.php');","\t\t\t\t\texit();\t\t\t","\t\t\t\t }else{","\t\t\t\t\t  echo  '<div class=\"error\">Username or Password is incorrect</div>';\t\t\t","\t\t\t        }","\t\t}","\t\t","\t\t//check user is logged in or not ","\t\tpublic function logged_in(){","\t\t\treturn (isset($_SESSION['user_id'])) ? true : false; ","\t\t}","\t\t//fetching posts from database","\t\tpublic function posts(){","\t\t\tglobal $pdo;","\t\t\t$query = $pdo->prepare(\"SELECT * FROM `posts`,`users` WHERE user_id = user_id_p ORDER BY `post_id` DESC\");","\t\t\t$query->execute();","\t\t\treturn $query->fetchAll();","\t\t}","\t\t//add new post if user post ","\t\tpublic function add_post($user_id,$status,$file_parh){","\t\t\tglobal $pdo; ","\t\t\tif(empty($file_parh)){","\t\t\t\t$file_parh = 'NULL';","\t\t\t}","\t\t\t$query = $pdo->prepare('INSERT INTO `posts` (`post_id`, `user_id_p`, `status`, `status_image`, `status_time`) VALUES (NULL, ?, ?,?,  CURRENT_TIMESTAMP)');","\t\t\t$query->bindValue(1,$user_id);","\t\t\t$query->bindValue(2,$status);","\t\t\t$query->bindValue(3,$file_parh);","\t\t\t$query->execute();","\t\t\theader('Location: index.php');","\t\t}","\t\t//fetch user data by user id ","\t\tpublic function user_data($user_id){","\t\t\tglobal $pdo;","\t\t\t$query = $pdo->prepare('SELECT * FROM users WHERE user_id = ?');","\t\t\t$query->bindvalue(1,$user_id);","\t\t\t$query->execute();","","\t\t\treturn $query->fetch();","\t\t}","\t\t//timeAgo Function","\t\tpublic function timeAgo($time_ago){","","\t\t\t$time_ago = strtotime($time_ago);","\t\t\t$cur_time   = time();","\t\t\t$time_elapsed   = $cur_time - $time_ago;","\t\t\t$seconds    = $time_elapsed ;","\t\t\t$minutes    = round($time_elapsed / 60 );","\t\t\t$hours      = round($time_elapsed / 3600);","\t\t\t$days       = round($time_elapsed / 86400 );","\t\t\t$weeks      = round($time_elapsed / 604800);","\t\t\t$months     = round($time_elapsed / 2600640 );","\t\t\t$years      = round($time_elapsed / 31207680 );","\t\t\t// Seconds","\t\t\tif($seconds <= 60){","\t\t\t    return \"just now\";","\t\t\t}","\t\t\t//Minutes","\t\t\telse if($minutes <=60){","\t\t\t    if($minutes==1){","\t\t\t        return \"one minute ago\";","\t\t\t    }","\t\t\t    else{","\t\t\t        return \"$minutes minutes ago\";","\t\t\t    }","\t\t\t}","\t\t\t//Hours","\t\t\telse if($hours <=24){","\t\t\t    if($hours==1){","\t\t\t        return \"an hour ago\";","\t\t\t    }else{","\t\t\t        return \"$hours hrs ago\";","\t\t\t    }","\t\t\t}","\t\t\t//Days","\t\t\telse if($days <= 7){","\t\t\t    if($days==1){","\t\t\t        return \"yesterday\";","\t\t\t    }else{","\t\t\t        return \"$days days ago\";","\t\t\t    }","\t\t\t}","\t\t\t//Weeks","\t\t\telse if($weeks <= 4.3){","\t\t\t    if($weeks==1){","\t\t\t        return \"a week ago\";","\t\t\t    }else{","\t\t\t        return \"$weeks weeks ago\";","\t\t\t    }","\t\t\t}","\t\t\t//Months","\t\t\telse if($months <=12){","\t\t\t    if($months==1){","\t\t\t        return \"a month ago\";","\t\t\t    }else{","\t\t\t        return \"$months months ago\";","\t\t\t    }","\t\t\t}","\t\t\t//Years","\t\t\telse{","\t\t\t    if($years==1){","\t\t\t        return \"one year ago\";","\t\t\t    }else{","\t\t\t        return \"$years years ago\";","\t\t\t    }","\t\t\t}","\t\t}","\t}","?>"]}]]},"ace":{"folds":[],"scrolltop":1187,"scrollleft":0,"selection":{"start":{"row":121,"column":2},"end":{"row":121,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":73,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1494981329088,"hash":"7607b4a2b94a94985e96504494f6a2c67139f481"}